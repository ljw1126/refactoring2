# Chapter8. ê¸°ëŠ¥ ì´ë™

## í›„ê¸°
ì±•í„° 8ì„ í•™ìŠµí•˜ë©´ì„œ, ë‹¨ìˆœíˆ ì½”ë“œë¥¼ ì´ë™í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë‹¤ìŒ ë‹¨ê³„ì˜ ë¦¬íŒ©í„°ë§ì´ ìì—°ìŠ¤ëŸ½ê²Œ ì´ì–´ì§„ë‹¤ëŠ” ì ì´ ì¸ìƒì ì´ì—ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, `ë¬¸ì¥ ìŠ¬ë¼ì´ë“œ í•˜ê¸° â†’ ë°˜ë³µë¬¸ ìª¼ê°œê¸° â†’ ë°˜ë³µë¬¸ì„ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ë³€í™˜í•˜ê¸° or ì¸ë¼ì¸ ì½”ë“œë¥¼ í•¨ìˆ˜ í˜¸ì¶œë¡œ ë°”ê¾¸ê¸°` ê°™ì€ íë¦„ì´ ìˆì—ˆë‹¤.
ê´€ë ¨ ìˆëŠ” ì½”ë“œë¥¼ ëª¨ìœ¼ëŠ” ê²ƒì„ ì‹œì‘ìœ¼ë¡œ ë¦¬íŒ©í„°ë§ì„ ìˆ˜í–‰í• ìˆ˜ë¡ ì½”ë“œê°€ ë”ìš± ì½ê¸° ì‰¬ì›Œì§€ê³ , ì‘ì§‘ë„ì™€ ì¬í™œìš©ì„±ì´ ë†’ì•„ì§„ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.
<br/>

ë˜í•œ, í•„ë“œë‚˜ í•¨ìˆ˜ë¥¼ ì´ë™í•  ë•Œ ë‹¨ìˆœíˆ ì½”ë“œ êµ¬ì¡°ë§Œ ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì˜ì¡´ì„±ê³¼ ë¬¸ë§¥ì„ í•¨ê»˜ ê³ ë ¤í•´ì•¼ í•œë‹¤ëŠ” ì ë„ ì¸ìƒì ì´ì—ˆë‹¤.
íŠ¹íˆ `8.2 í•„ë“œ ì˜®ê¸°ê¸°`ì˜ ì˜ˆì œ2ì—ì„œ `Account`ì™€ `AccountType` ì¤‘ **ì´ììœ¨** í•„ë“œë¥¼ ì–´ë””ì— ë‘ì–´ì•¼ í• ì§€ ê³ ë¯¼í•˜ëŠ” ê³¼ì •ì´ í¥ë¯¸ë¡œì› ë‹¤.
í˜„ì‹¤ì ì¸ ê´€ì ì—ì„œ ë³´ë©´, ì´ììœ¨ì„ ê´€ë¦¬í•˜ëŠ” ë°©ì‹ë„ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆì„ ìˆ˜ ìˆë‹¤.
1. ì´ììœ¨ì´ ê³ ì •ëœ ê²½ìš° â†’ `AccountType`ìœ¼ë¡œ ì´ë™
2. ê³„ì¢Œë³„ ì´ììœ¨ì´ ë‹¤ë¥¼ ê²½ìš° â†’ `Account`ì—ì„œ setterë¥¼ í†µí•´ í›„ì²˜ë¦¬
3. ë” ë³µì¡í•œ ì¡°ê±´ì´ í•„ìš”í•œ ê²½ìš° â†’ **ì „ëµ íŒ¨í„´**ì„ í™œìš©í•˜ì—¬ ìœ ì—°í•˜ê²Œ ê´€ë¦¬

ì´ì²˜ëŸ¼ ë‹¨ìˆœíˆ í•„ë“œë¥¼ ì´ë™í•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ë„ë©”ì¸ ë¡œì§ì„ ì–´ë–»ê²Œ ì„¤ê³„í•  ê²ƒì¸ì§€ ê³ ë¯¼í•˜ëŠ” ê³¼ì •ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ ì¸ìƒ ê¹Šì—ˆë‹¤.


---
## í•™ìŠµ ê¸°ë¡
**ëª©ì°¨**
- [8.1 í•¨ìˆ˜ ì˜®ê¸°ê¸°](#81-í•¨ìˆ˜-ì˜®ê¸°ê¸°-)
- [8.2 í•„ë“œ ì˜®ê¸°ê¸°](#82-í•„ë“œ-ì˜®ê¸°ê¸°)
- [8.3 ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì˜®ê¸°ê¸°](#83-ë¬¸ì¥ì„-í•¨ìˆ˜ë¡œ-ì˜®ê¸°ê¸°)
- [8.4 ë¬¸ì¥ì„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜®ê¸°ê¸°](#84-ë¬¸ì¥ì„-í˜¸ì¶œí•œ-ê³³ìœ¼ë¡œ-ì˜®ê¸°ê¸°)
- [8.5 ì¸ë¼ì¸ ì½”ë“œë¥¼ í•¨ìˆ˜ í˜¸ì¶œë¡œ ë°”ê¾¸ê¸°](#85-ì¸ë¼ì¸-ì½”ë“œë¥¼-í•¨ìˆ˜-í˜¸ì¶œë¡œ-ë°”ê¾¸ê¸°)
- [8.6 ë¬¸ì¥ ìŠ¬ë¼ì´ë“œí•˜ê¸°](#86-ë¬¸ì¥-ìŠ¬ë¼ì´ë“œí•˜ê¸°)
- [8.7 ë°˜ë³µë¬¸ ìª¼ê°œê¸°](#87-ë°˜ë³µë¬¸-ìª¼ê°œê¸°)
- [8.8 ë°˜ë³µë¬¸ì„ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ë°”ê¾¸ê¸°](#88-ë°˜ë³µë¬¸ì„-íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ-ë°”ê¾¸ê¸°)
- [8.9 ì£½ì€ ì½”ë“œ ì œê±°í•˜ê¸°](#89-ì£½ì€-ì½”ë“œ-ì œê±°í•˜ê¸°)

<br/>

### 8.1 í•¨ìˆ˜ ì˜®ê¸°ê¸° 
- ì¹´íƒˆë¡œê·¸: [Move Function](https://refactoring.com/catalog/moveFunction.html)
- ë°”ë¡œê°€ê¸°
  - [ì˜ˆì‹œ](../src/main/java/com/example/refactoring2/ch08/ex1)
  - [í…ŒìŠ¤íŠ¸](../src/test/java/com/example/refactoring2/ch08/ex1)

<br/>

**ë°°ê²½**
- ì¢‹ì€ s/w ì„¤ê³„ì˜ í•µì‹¬ì€ ëª¨ë“ˆí™”ê°€ ì–¼ë§ˆë‚˜ ì˜ ë˜ì–´ ìˆëŠëƒë¥¼ ëœ»í•˜ëŠ” `ëª¨ë“ˆì„±(modularity)`ì´ë‹¤
- ëª¨ë“ˆì„±ì´ë€? í”„ë¡œê·¸ë¨ì˜ ì–´ë”˜ê°€ë¥¼ ìˆ˜ì •í•˜ë ¤ í•  ë•Œ í•´ë‹¹ ê¸°ëŠ¥ê³¼ ê¹Šì´ ê´€ë ¨ëœ ì‘ì€ ì¼ë¶€ë§Œ ì´í•´í•´ë„ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ëŠ¥ë ¥ì´ë‹¤
- ëª¨ë“ˆì„±ì„ ë†’ì´ë ¤ë©´ ì„œë¡œ ì—°ê´€ëœ ìš”ì†Œë“¤ì„ í•¨ê»˜ ë¬¶ê³ , ìš”ì†Œ ì‚¬ì´ì˜ ì—°ê²° ê´€ê³„ë¥¼ ì‰½ê²Œ ì°¾ê³  ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•˜ë‚Ÿ
- ë³´í†µì€ ì´í•´ë„ê°€ ë†’ì•„ì§ˆìˆ˜ë¡ s/w ìš”ì†Œë“¤ì„ ë” ì˜ ë¬¶ëŠ” ìƒˆë¡œìš´ ë°©ë²•ì„ ê¹¨ìš°ì¹˜ê²Œ ëœë‹¤
- ëª¨ë“  í•¨ìˆ˜ëŠ” ì–´ë–¤ `ì»¨í…ìŠ¤íŠ¸`, `íŠ¹ì • ëª¨ë“ˆ` ì•ˆì— ì¡´ì¬í•œë‹¤
- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ í•µì‹¬ ëª¨ë“ˆí™” ì»¨í…ìŠ¤íŠ¸ëŠ” `í´ë˜ìŠ¤`ë‹¤
<br/>

> **INFO** ì–´ë–¤ í•¨ìˆ˜ê°€ ìì‹ ì´ ì†í•œ ëª¨ë“ˆ A ìš”ì†Œë³´ë‹¤ ë‹¤ë¥¸ ëª¨ë“ˆ Bì˜ ìš”ì†Œë“¤ì„ ë” ë§ì´ ì°¸ì¡°í•œë‹¤ë©´ ëª¨ë“ˆ Bë¡œ ì˜®ê²¨ì¤˜ì•¼ ë§ˆë•…í•˜ë‹¤.
> ì´ë ‡ê²Œí•˜ë©´ ìº¡ìŠí™”ê°€ ì¢‹ì•„ì ¸ì„œ, ì´ s/wì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ ëª¨ë“ˆ Bì˜ ì„¸ë¶€ì‚¬í•­ì— ëœ ì˜ì¡´í•˜ê²Œ ëœë‹¤

**ì ˆì°¨**
- ì„ íƒí•œ í•¨ìˆ˜ê°€ í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ëª¨ë“  í”„ë¡œê·¸ë¨ ìš”ì†Œë¥¼ ì‚´í´ë³¸ë‹¤
  - ì´ ìš”ì†Œë“¤ ì¤‘ì—ë„ í•¨ê»˜ ì˜®ê²¨ì•¼ í•  ê²Œ ìˆëŠ”ì§€ ê³ ë¯¼í•´ë³¸ë‹¤
- ì„ íƒí•œ í•¨ìˆ˜ê°€ ë‹¤í˜• ë©”ì„œë“œì¸ì§€ í™•ì¸í•œë‹¤
- ì„ íƒí•œ í•¨ìˆ˜ë¥¼ íƒ€ê¹ƒ ì»¨í…ìŠ¤íŠ¸ë¡œ ë³µì‚¬í•œë‹¤
  - ì´ë•Œ ì›ë˜ì˜ í•¨ìˆ˜ë¥¼ `ì†ŒìŠ¤ í•¨ìˆ˜(source function)`, ë³µì‚¬í•´ì„œ ìƒˆë¡œ ë§Œë“  í•¨ìˆ˜ë¥¼ `íƒ€ê¹ƒ í•¨ìˆ˜(target function)`ë¼ í•œë‹¤ 
  - íƒ€ê¹ƒ í•¨ìˆ˜ê°€ ìƒˆë¡œìš´ í„°ì „ì— ì˜ ìë¦¬ ì¡ë„ë¡ ë‹¤ë“¬ëŠ”ë‹¤
- ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•œë‹¤
- ì†ŒìŠ¤ ì»¨í…ìŠ¤íŠ¸ì—ì„œ íƒ€ê¹ƒ í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•  ë°©ë²•ì„ ì°¾ì•„ ë°˜ì˜í•œë‹¤
- ì†ŒìŠ¤ í•¨ìˆ˜ë¥¼ íƒ€ê¹ƒ í•¨ìˆ˜ì˜ ìœ„ì„ í•¨ìˆ˜ê°€ ë˜ë„ë¡ ìˆ˜ì •í•œë‹¤
- í…ŒìŠ¤íŠ¸í•œë‹¤ 
- ì†ŒìŠ¤ í•¨ìˆ˜ë¥¼ ì¸ë¼ì¸ í• ì§€ ê³ ë¯¼í•´ë³¸ë‹¤
<br/>

**ğŸ’©before**
```java
public class GpsTrackSummary {
    private GpsTrackSummary() {}

    public static TrackSummary trackSummary(List<Waypoint> points) {
        double totalTime = calculateTime(points);
        double pace = totalTime / 60 / totalDistance(points);
        return new TrackSummary(totalTime, totalDistance(points), pace);
    }

    private static double totalDistance(List<Waypoint> points) {
        double result = 0;
        for(int i = 1; i < points.size(); i++) {
            result += distance(points.get(i - 1), points.get(i));
        }
        return result;
    }

    private static double distance(Waypoint p1, Waypoint p2) {
        int earthRadius = 6371;
        double dLat = radians(p2.getLatitude() - p1.getLatitude());
        double dLon = radians(p2.getLongitude() - p1.getLongitude());

        double a = Math.pow(Math.sin(dLat / 2), 2) + Math.cos(radians(p2.getLatitude()))
                * Math.cos(radians(p1.getLatitude())) * Math.pow(Math.sin(dLon / 2), 2);
        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

        return earthRadius * c;
    }

    private static double radians(double degrees) {
        return degrees * Math.PI / 180;
    }

    private static double calculateTime(List<Waypoint> points) {
        if (points.isEmpty()) {
            return 0;
        }

        return points.get(points.size() - 1).getTimestamp() - points.get(0).getTimestamp();
    }
}
```
- ì˜ˆì‹œ1ì˜ ê²½ìš° ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í•¨ìˆ˜ ì¤‘ì²© ì‚¬ìš©í•˜ë‚˜ ìë°”ëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ê·¸ë˜ì„œ ë©”ì„œë“œ ë¶„ë¦¬ë¡œ ì„ ì–¸í•˜ì—¬ êµ¬í˜„í•˜ì˜€ë‹¤
- Point. í•¨ìˆ˜ ì¤‘ì²©ì„ ì‚¬ìš©í•´ í•¨ìˆ˜ ì˜®ê¸°ê¸°ë¥¼ í•˜ëŠ”ë° ìˆì–´, ì˜ì¡´í•˜ëŠ”ê²Œ ì—†ë‹¤ë©´ ìµœìƒìœ„ë¡œ í•¨ìˆ˜ë¥¼ ì´ë™í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤

> (p285) ì¤‘ì²© í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ìˆ¨ê²¨ì§„ ë°ì´í„°ë¼ë¦¬ ìƒí˜¸ ì˜ì¡´í•˜ê¸°ê°€ì•„ì£¼ ì‰¬ìš°ë‹ˆ ì¤‘ì²©í•¨ìˆ˜ëŠ” ë˜ë„ë¡ ë§Œë“¤ì§€ ë§ì. 

<br/>

**âœ¨after**
```java
public class GpsTrackSummary {  
    private final List<Waypoint> points;  
  
    public GpsTrackSummary(List<Waypoint> points) {  
        this.points = new ArrayList<>(points);  
    }  
  
    public TrackSummary trackSummary() {  
        double totalTime = calculateTime();  
        double pace = totalTime / 60 / totalDistance();  
        return new TrackSummary(totalTime, totalDistance(), pace);  
    }  
  
    private double totalDistance() {  
        double result = 0;  
        for(int i = 1; i < points.size(); i++) {  
            result += points.get(i - 1).distance(points.get(i));  
        }  
        return result;  
    }  
  
    private double calculateTime() {  
        if (points.isEmpty()) {  
            return 0;  
        }  
  
        Waypoint last = points.get(points.size() - 1);  
        Waypoint first = points.get(0);  
        return last.diffTimestamp(first);  
    }  
}


public class Waypoint {  
    private final double latitude;  
    private final double longitude;  
    private final double timestamp;  
  
    public Waypoint(double latitude, double longitude, double timestamp) {  
        this.latitude = latitude;  
        this.longitude = longitude;  
        this.timestamp = timestamp;  
    }  
  
    public double distance(Waypoint other) {  
        int earthRadius = 6371;  
        double dLat = radians(other.latitude - this.latitude);  
        double dLon = radians(other.longitude - this.longitude);  
  
        double a = Math.pow(Math.sin(dLat / 2), 2) + Math.cos(radians(other.latitude))  
                * Math.cos(radians(this.latitude)) * Math.pow(Math.sin(dLon / 2), 2);  
        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));  
  
        return earthRadius * c;  
    }  
  
    private double radians(double degrees) {  
        return degrees * Math.PI / 180;  
    }  
  
    public double diffTimestamp(Waypoint other) {  
        return this.timestamp - other.timestamp;  
    }

    // getter ìƒëµ
}
```
- ì¶”ê°€ë¡œ `distance` ì°¨ì´ë¥¼ êµ¬í•  ë•Œ Waypoint ê°ì²´ì—ê²Œ ë¬»ëŠ” í˜•íƒœë¡œ ë¦¬íŒ©í„°ë§ í•˜ì˜€ë‹¤
  - `result += points.get(i - 1).distance(points.get(i));`
- ì˜ˆì‹œ2 ì½”ë“œëŠ” ë°”ë¡œê°€ê¸° ì°¸ê³ 
<br/>

> (p287)ë§Œì•½ ì†ŒìŠ¤ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ê°€ì ¸ì™€ì•¼ í•  ë°ì´í„° ë§ë‹¤ë©´? Account ìì²´(this)ë¥¼ ë©”ì„œë“œ ì¸ìë¡œ ë„˜ê¸´ë‹¤


### 8.2 í•„ë“œ ì˜®ê¸°ê¸°
- ì¹´íƒˆë¡œê·¸: [Move Field](https://refactoring.com/catalog/moveField.html)
- ë°”ë¡œê°€ê¸°
  - [ì˜ˆì‹œ](../src/main/java/com/example/refactoring2/ch08/ex2)
  - [í…ŒìŠ¤íŠ¸](../src/test/java/com/example/refactoring2/ch08/ex2)

<br/>

**ë°°ê²½**
- í”„ë¡œê·¸ë¨ì˜ ì§„ì§œ í˜ì€ `ë°ì´í„° êµ¬ì¡°(ì¤‘ìš”*)`ì—ì„œ ë‚˜ì˜¨ë‹¤
- ì£¼ì–´ì§„ ë¬¸ì œì— ì í•©í•œ `ë°ì´í„° êµ¬ì¡°`ë¥¼ í™œìš©í•˜ë©´ ë™ì‘ ì½”ë“œëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ë‹¨ìˆœí•˜ê³  ì§ê´€ì ìœ¼ë¡œ ì§œì—¬ì§„ë‹¤
- ì˜ˆì»¨ëŒ€ í•¨ìˆ˜ì—
  - ì–´ë–¤ ë ˆì½”ë“œë¥¼ ë„˜ê¸¸ ë•Œë§ˆë‹¤ ë˜ ë‹¤ë¥¸ ë ˆì½”ë“œì˜ í•„ë“œë„ í•¨ê»˜ ë„˜ê¸°ê³  ìˆë‹¤ë©´ ë°ì´í„° ìœ„ì¹˜ë¥¼ ì˜®ê²¨ì•¼ í•  ê²ƒì´ë‹¤(ğŸ’©)
    - í•¨ìˆ˜ì— í•­ìƒ í•¨ê»˜ ê±´ë„¤ì§€ëŠ” ë°ì´í„° ì¡°ê°ë“¤ì€ ìƒí˜¸ ê´€ê³„ê°€ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚˜ë„ë¡ í•œ ë ˆì½”ë“œì— ë‹´ëŠ” ê²Œ ê°€ì¥ ì¢‹ë‹¤
  - í•œ ë ˆì½”ë“œë¥¼ ë³€ê²½í•˜ë ¤ í•  ë•Œ ë‹¤ë¥¸ ë ˆì½”ë“œì˜ í•„ë“œê¹Œì§€ ë³€ê²½í•´ì•¼ë§Œ í•œë‹¤ë©´ í•„ë“œì˜ ìœ„ì¹˜ê°€ ì˜ëª»ë˜ì—ˆë‹¤ëŠ” ì‹ í˜¸ë‹¤(ğŸ’©)
  - êµ¬ì¡°ì²´ ì—¬ëŸ¬ ê°œì— ì •ì˜ëœ ë˜‘ê°™ì€ í•„ë“œë“¤ì„ ê°±ì‹ í•´ì•¼ í•œë‹¤ë©´ í•œ ë²ˆë§Œ ê°±ì‹ í•´ë„ ë˜ëŠ” ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì˜®ê¸°ë¼ëŠ” ì‹ í˜¸ë‹¤(ğŸ’©)
- ë ˆì½”ë“œ ëŒ€ì‹  í´ë˜ìŠ¤ë‚˜ ê°ì²´ê°€ ì™€ë„ ë˜‘ê°™ë‹¤
- ë°ì´í„°ì˜ ìœ„ì¹˜ë¥¼ ì˜®ê¸°ë”ë¼ë„ ì ‘ê·¼ìë§Œ ê·¸ì— ë§ê²Œ ìˆ˜ì •í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë“¤ì€ ì•„ë¬´ ìˆ˜ì •ì—†ì´ë„ ë™ì‘í•  ê²ƒì´ë‹¤
- ë”°ë¼ì„œ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ ë¦¬íŒ©í„°ë§ì„ ìˆ˜í–‰í•˜ê¸°ê°€ ë” ì‰¬ì›Œì§„ë‹¤
<br/>

**ì ˆì°¨**
- ì†ŒìŠ¤ í•„ë“œê°€ ìº¡ìŠí™”ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ìº¡ìŠí™”í•œë‹¤
- í…ŒìŠ¤íŠ¸í•œë‹¤
- íƒ€ê¹ƒ ê°ì²´ì— í•„ë“œ(ì™€ ì ‘ê·¼ì ë©”ì„œë“œ)ë¥¼ ìƒì„±í•œë‹¤
- ì •ì  ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤
- ì†ŒìŠ¤ ê°ì²´ì—ì„œ íƒ€ê¹ƒ ê°ì²´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤
- ì ‘ê·¼ìë“¤ì´ íƒ€ê¹ƒ í•„ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤
- í…ŒìŠ¤íŠ¸í•œë‹¤
- ì†ŒìŠ¤ í•„ë“œë¥¼ ì œê±°í•œë‹¤
- í…ŒìŠ¤íŠ¸í•œë‹¤

<br/>

**ğŸ’©before**
```java
public class Customer {
  private final String name;
  private double discountRate;
  private final CustomerContract customerContract;

  public Customer(String name, double discountRate) {
    this(name, discountRate, new CustomerContract(LocalDateTime.now()));
  }

  public Customer(String name, double discountRate, CustomerContract customerContract) {
    this.name = name;
    this.discountRate = discountRate;
    this.customerContract = customerContract;
  }

  public void becomePreferred() {
    this.discountRate += 0.03;
    // do something
  }

  public Amount applyDiscount(Amount amount) {
    return amount.subtract(amount.multiply(discountRate));
  }
}


public class CustomerContract {
  private final LocalDateTime startDate;

  public CustomerContract(LocalDateTime startDate) {
    this.startDate = startDate;
  }
}
```
<br/>

**âœ¨after**
```java
public class Customer {
  private final String name;
  private final CustomerContract customerContract;

  public Customer(String name, double discountRate, CustomerContract customerContract) {
    this.name = name;
    this.customerContract = customerContract;
    this.setDiscountRate(discountRate); // í›„ì²˜ë¦¬
  }

  public void becomePreferred() {
    this.setDiscountRate(getDiscountRate() + 0.03);
    // do something
  }

  public Amount applyDiscount(Amount amount) {
    return amount.subtract(amount.multiply(getDiscountRate()));
  }
  
  public double getDiscountRate() {
    return customerContract.getDiscountRate();
  }

  public void setDiscountRate(double aNumber) {
    this.customerContract.setDiscountRate(aNumber);
  }
}

public class CustomerContract {
  private final LocalDateTime startDate;
  private double discountRate;

  public CustomerContract(LocalDateTime startDate) {
    this(startDate, 0.0);
  }

  public CustomerContract(LocalDateTime startDate, double discountRate) {
    this.startDate = startDate;
    this.discountRate = discountRate;
  }
}
```
- `discountRate`ëŠ” **ê³ ê°**ì´ ì•„ë‹ˆë¼ **ê³„ì•½**ì´ í• ì¸ì„ ê²°ì •í•œë‹¤ê³  ë³´ëŠ”ê²Œ ìì—°ìŠ¤ëŸ¬ì›€
- ë”°ë¼ì„œ `CustomerContract`ê°€ `discountRate`ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ë„ë¡ í•„ë“œë¥¼ ì˜®ê¹€
- ìƒì„±ì ì´ˆê¸°í™”ì‹œ í• ì¸ë¥ ì„ ê³ ì •í•  ìˆ˜ ìˆì°Œë§Œ `setDiscountRate(..)`ë¡œ í›„ì²˜ë¦¬ë¥¼ ê³ ë ¤í•˜ì—¬ ìœ ì—°ì„±ì„ ë†’ì´ëŠ” ê²½ìš°ë„ ìˆë‹¤ê³  ìƒê°ë¨
<br/>

`ì˜ˆì‹œ2. ê³µìœ  ê°ì²´ë¡œ ì´ë™í•˜ê¸°`ì—ì„œ `Account`ì— ìˆë˜ **ì´ììœ¨**ì„ `AccountType`ìœ¼ë¡œ ì´ë™í•˜ì˜€ë‹¤
- `AccountType`ë§ˆë‹¤ **ì´ììœ¨**ì´ ê³ ì •ë˜ìˆëŠ” ê²½ìš°ëŠ” ì´ ë°©ë²•ì´ ë§ë‹¤ê³  ìƒê°í•œë‹¤
- í•˜ì§€ë§Œ í˜„ì‹¤ì—ì„œ **ì´ììœ¨**ì€ ê°€ì…ì¡°ê±´(ê¸°ê°„, ê³ ê° ë“±ê¸‰ ë“±)ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤
- ê·¸ëŸ¬ë¯€ë¡œ `setter`ë¥¼ í™œìš©í•´ í›„ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜, **ì´ììœ¨** ë¡œì§ì´ ë³µì¡í•˜ê³  í™•ì¥ì„±ì´ í•„ìš”í•˜ë‹¤ë©´ `ì „ëµ íŒ¨í„´` ë“±ì„ ì ìš©í•˜ëŠ” ë°©ë²•ë„ ê³ ë ¤í•  í•„ìš”ê°€ ìˆì–´ ë³´ì¸ë‹¤


### 8.3 ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì˜®ê¸°ê¸°
- ì¹´íƒˆë¡œê·¸: [Move Statements into Function](https://refactoring.com/catalog/moveStatementsIntoFunction.html)
- ë°˜ëŒ€ ë¦¬íŒ©í„°ë§: [8.4 ë¬¸ì¥ì„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜®ê¸°ê¸°](#84-ë¬¸ì¥ì„-í˜¸ì¶œí•œ-ê³³ìœ¼ë¡œ-ì˜®ê¸°ê¸°)
- ë°”ë¡œê°€ê¸°
  - [ì˜ˆì‹œ](../src/main/java/com/example/refactoring2/ch08/ex3)
  - [í…ŒìŠ¤íŠ¸](../src/test/java/com/example/refactoring2/ch08/ex3)

<br/>

**ë°°ê²½**
- ì €ìëŠ” íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œê°€ ë‚˜ì˜¬ ë•Œë§ˆë‹¤ ê·¸ ì•ì´ë‚˜ ë’¤ì—ì„œ ë˜‘ê°™ì€ ì½”ë“œê°€ ì¶”ê°€ë¡œ ì‹¤í–‰ë˜ëŠ” ëª¨ìŠµì„ ë³´ë©´
  - ê·¸ ë°˜ë³µë˜ëŠ” ë¶€ë¶„ì„ í”¼í˜¸ì¶œ í•¨ìˆ˜ë¡œ í•©ì¹˜ëŠ” ë°©ë²•ì„ ê¶ë¦¬í•œë‹¤ê³  ë§í•œë‹¤
  - ì´ë ‡ê²Œ í•´ë‘ë©´ ì¶”í›„ ë°˜ë³µë˜ëŠ” ë¶€ë¶„ì—ì„œ ë¬´ì–¸ê°€ ìˆ˜ì •í•  ì¼ì´ ìƒê²¼ì„ ë•Œ ë‹¨ í•œ ê³³ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.
  - í˜¸ì¶œí•˜ëŠ” ê³³ì´ ì•„ë¬´ë¦¬ ë§ë”ë¼ë„ ë§ì´ë‹¤

<br/>

**ì ˆì°¨**
- ë°˜ë³µ ì½”ë“œê°€ í•¨ìˆ˜ í˜¸ì¶œ ë¶€ë¶„ê³¼ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆë‹¤ë©´ `ë¬¸ì¥ ìŠ¬ë¼ì´ë“œí•˜ê¸°(8.6)`ë¥¼ ì ìš©í•´ ê·¼ì²˜ë¡œ ì˜®ê¸´ë‹¤
- íƒ€ê¹ƒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì´ í•œ ê³³ ë¿ì´ë©´, 
  - ë‹¨ìˆœíˆ ì†ŒìŠ¤ ìœ„ì¹˜ì—ì„œ í•´ë‹¹ ì½”ë“œë¥¼ ì˜ë¼ë‚´ì–´ í”¼í˜¸ì¶œ í•¨ìˆ˜ë¡œ ë³µì‚¬í•˜ê³  í…ŒìŠ¤íŠ¸í•œë‹¤
  - ì´ ê²½ìš°ë¼ë©´ ë‚˜ë¨¸ì§€ ë‹¨ê³„ëŠ” ë¬´ì‹œí•œë‹¤
- í˜¸ì¶œìê°€ ë‘˜ ì´ìƒì´ë©´ í˜¸ì¶œì ì¤‘ 'í•˜ë‚˜ì—ì„œ íƒ€ê¹ƒ í•¨ìˆ˜ í˜¸ì¶œ ë¶€ë¶„ê³¼ ê·¸ í•¨ìˆ˜ë¡œ ì˜®ê¸°ë ¤ëŠ” ë¬¸ì¥ë“¤ì„ í•¨ê»˜' ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œë‹¤
  - ì¶”ì¶œí•œ í•¨ìˆ˜ì— ê¸°ì–µí•˜ê¸° ì‰¬ìš´ **ì„ì‹œ ì´ë¦„**ì„ ì§€ì–´ì¤€ë‹¤
- ë‹¤ë¥¸ í˜¸ì¶œì ëª¨ë‘ê°€ ë°©ê¸ˆ ì¶”ì¶œí•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤
  - í•˜ë‚˜ì”© ìˆ˜ì •í•  ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸í•œë‹¤
- ëª¨ë“  í˜¸ì¶œìê°€ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì›ë˜ í•¨ìˆ˜ë¥¼ ìƒˆë¡œìš´ í•¨ìˆ˜ ì•ˆìœ¼ë¡œ ì¸ë¼ì¸(6.2)í•œ í›„ ì›ë˜ í•¨ìˆ˜ë¥¼ ì œê±°í•œë‹¤
- ìƒˆë¡œìš´ í•¨ìˆ˜ì˜ ì´ë¦„ì„ ì›ë˜ í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ ë°”ê¿”ì¤€ë‹¤
  - ë” ë‚˜ì€ ì´ë¦„ìœ¼ë¡œ ë³€ê²½
<br/>

**ğŸ“šStringJoiner (1.8ë¶€í„° ì§€ì›)**
- [ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°](https://stackoverflow.com/questions/63150/whats-the-best-way-to-build-a-string-of-delimited-items-in-java)
- [ì˜¤ë¼í´ doc](https://docs.oracle.com/javase/8/docs/api/java/util/StringJoiner.html)

**ğŸ’©before**
```java
public class HtmlTemplate {

  public static String renderPerson(OutputStream outputStream, Person person) {
    StringJoiner result = new StringJoiner("\n");
    result.add("<p>" + person.name() + "</p>");
    result.add(renderPhoto(person.photo()));
    result.add("<p>ì œëª©: " + person.photo().title() + "</p>");
    result.add(emitPhotoData(person.photo()));
    return result.toString();
  }

  private static String renderPhoto(Photo photo) {
    return photoDiv(photo);
  }

  private static String photoDiv(Photo aPhoto) {
    StringJoiner result = new StringJoiner("\n");
    result.add("<div>");
    result.add("<p>ì œëª©: " + aPhoto.title() + "</p>");
    result.add(emitPhotoData(aPhoto));
    result.add("</div>");
    return result.toString();
  }

  private static String emitPhotoData(Photo aPhoto) {
    StringJoiner result = new StringJoiner("\n");
    result.add("<p>ìœ„ì¹˜: " + aPhoto.location() + "</p>");
    result.add("<p>ë‚ ì§œ: " + aPhoto.date().toString() + "</p>");
    return result.toString();
  }
}
```
<br/>

**âœ¨after**
```java
public class HtmlTemplate {

  public static String renderPerson(OutputStream outputStream, Person person) {
    StringJoiner result = new StringJoiner("\n");
    result.add("<p>" + person.name() + "</p>");
    result.add(renderPhoto(person.photo()));
    result.add(emitPhotoData(person.photo()));
    return result.toString();
  }

  private static String renderPhoto(Photo photo) {
    return photoDiv(photo);
  }

  private static String photoDiv(Photo aPhoto) {
    StringJoiner result = new StringJoiner("\n");
    result.add("<div>");
    result.add(emitPhotoData(aPhoto));
    result.add("</div>");
    return result.toString();
  }

  private static String emitPhotoData(Photo aPhoto) {
    StringJoiner result = new StringJoiner("\n");
    result.add("<p>ì œëª©: " + aPhoto.title() + "</p>");
    result.add("<p>ìœ„ì¹˜: " + aPhoto.location() + "</p>");
    result.add("<p>ë‚ ì§œ: " + aPhoto.date().toString() + "</p>");
    return result.toString();
  }
}
```
- ì•½ê°„ ìŠ¤íŠ¸ë­ê¸€ëŸ¬ íŒ¨í„´ì´ ìƒê°ë‚˜ëŠ” ë¦¬íŒ©í„°ë§ì´ì—ˆë‹¤.
<br/>

### 8.4 ë¬¸ì¥ì„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜®ê¸°ê¸°
- ì¹´íƒˆë¡œê·¸: [Move Statements to Callers](https://refactoring.com/catalog/moveStatementsToCallers.html)
- ë°˜ëŒ€ ë¦¬íŒ©í„°ë§: [8.3 ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì˜®ê¸°ê¸°](#83-ë¬¸ì¥ì„-í•¨ìˆ˜ë¡œ-ì˜®ê¸°ê¸°)
- ë°”ë¡œê°€ê¸°
  - [ì˜ˆì‹œ](../src/main/java/com/example/refactoring2/ch08/ex4)
<br/>

**ë°°ê²½**
- **í•¨ìˆ˜**ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ìŒ“ì•„ ì˜¬ë¦¬ëŠ” ì¶”ìƒí™”ì˜ ê¸°ë³¸ ë¹Œë”© ë¸”ë¡ì´ë‹¤
- **í•¨ìˆ˜ ê´€ì **ì—ì„œ ìƒê°í•´ë³´ë©´, ì´ˆê¸°ì—ëŠ” ì‘ì§‘ë„ ë†’ê³  í•œ ê°€ì§€ ì¼ë§Œ ìˆ˜í–‰í•˜ë˜ í•¨ìˆ˜ê°€ ì–´ëŠìƒˆ ë‘˜ ì´ìƒì˜ ë‹¤ë¥¸ ì¼ì„ ìˆ˜í–‰í•˜ê²Œ ë°”ë€” ìˆ˜ ìˆë‹¤
- ì˜ˆì»¨ëŒ€ ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©í•˜ë˜ ê³µí†µ ê¸°ëŠ¥ì´ ì¼ë¶€ í˜¸ì¶œìì—ê²ŒëŠ” ë‹¤ë¥´ê²Œ ë™ì‘í•˜ë„ë¡ ë°”ë€Œì–´ì•¼ í•œë‹¤ë©´ ì´ëŸ° ì¼ì´ ë²Œì–´ì§„ë‹¤
- ì‘ì€ ë³€ê²½ì´ë¼ë©´ ë¬¸ì¥ì„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜®ê¸°ëŠ” ê²ƒìœ¼ë¡œ ì¶©ë¶„í•˜ì§€ë§Œ
  - í˜¸ì¶œìì™€ í˜¸ì¶œ ëŒ€ìƒì˜ ê²½ê³„ë¥¼ ì™„ì „íˆ ë‹¤ì‹œ ê·¸ì–´ì•¼ í•  ë•Œë„ ìˆë‹¤
  - í›„ìì˜ ê²½ìš°ë¼ë©´ í•¨ìˆ˜ `ì¸ë¼ì¸í•˜ê¸°(6.2) - ë¬¸ì¥ ìŠ¬ë¼ì´ë“œí•˜ê¸°(8.6) - í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°(6.1)`ë¡œ ë” ì í•©í•œ ê²½ê³„ë¥¼ ì„¤ì •í•˜ë©´ ëœë‹¤

<br/>

**ì ˆì°¨**
- í˜¸ì¶œìê°€ í•œë‘ ê°œë¿ì´ê³  í”¼í˜¸ì¶œ í•¨ìˆ˜ë„ ê°„ë‹¨í•œ ë‹¨ìˆœí•œ ìƒí™©ì´ë©´
  - í”¼í˜¸ì¶œ í•¨ìˆ˜ì˜ ì²˜ìŒ(í˜¹ì€ ë§ˆì§€ë§‰) ì¤„ì„ ì˜ë¼ë‚´ì–´ í˜¸ì¶œìë¡œ ë³µì‚¬í•´ ë„£ëŠ”ë‹¤
  - í…ŒìŠ¤ë§Œ í†µê³¼í•˜ë©´ ì´ë²ˆ ë¦¬íŒ©í„°ë§ì€ ì—¬ê¸°ì„œ ëì´ë‹¤
- ë” ë³µì¡í•œ ìƒí™©ì—ì„œëŠ”
  - ì´ë™í•˜ì§€ 'ì•Šê¸¸' ì›í•˜ëŠ” ëª¨ë“  ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œ ë‹¤ìŒ ê²€ìƒ‰í•˜ê¸° ì‰¬ìš´ ì„ì‹œ ì´ë¦„ì„ ì§€ì–´ì¤€ë‹¤
- ì›ë˜ `í•¨ìˆ˜ë¥¼ ì¸ë¼ì¸(6.2)`í•œë‹¤
- ì¶”ì¶œëœ í•¨ìˆ˜ì˜ ì´ë¦„ì„ ì›ë˜ í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•œë‹¤

<br/>

**ğŸ’©before**
```java
public class HtmlTemplate {

  public static String renderPerson(OutputStreamWriter outputStreamWriter, Person person)
      throws IOException {
    outputStreamWriter.write("<p>" + person.name() + "</p>\n");
    renderPhoto(outputStreamWriter, person.photo());
    emitPhotoData(outputStreamWriter, person.photo());
    return outputStreamWriter.toString();
  }

  private static void renderPhoto(OutputStreamWriter outputStreamWriter, Photo photo)
      throws IOException {
    outputStreamWriter.write("doSomething\n");
  }

  private static void listRecentPhotos(OutputStreamWriter outputStreamWriter, List<Photo> photos)
      throws IOException {
    for (Photo photo : photos) {
      // ì¡°ê±´ì‹
      outputStreamWriter.write("<div>\n");
      emitPhotoData(outputStreamWriter, photo);
      outputStreamWriter.write("</div>\n");
    }
  }

  private static void emitPhotoData(OutputStreamWriter outputStreamWriter, Photo aPhoto)
      throws IOException {
    outputStreamWriter.write("<p>ì œëª©: " + aPhoto.title() + "</p>\n");
    outputStreamWriter.write("<p>ìœ„ì¹˜: " + aPhoto.location() + "</p>\n");
    outputStreamWriter.write("<p>ë‚ ì§œ: " + aPhoto.date().toString() + "</p>\n");
  }
}
```
<br/>

**âœ¨after**
```java
public class HtmlTemplate {

  public static String renderPerson(OutputStreamWriter outputStreamWriter, Person person)
      throws IOException {
    outputStreamWriter.write("<p>" + person.name() + "</p>\n");
    renderPhoto(outputStreamWriter, person.photo());
    emmitPhotoData(outputStreamWriter, person.photo());
    outputStreamWriter.write("<p>ìœ„ì¹˜: " + person.photo().location() + "</p>\n"); // ì—¬ê¸°
    return outputStreamWriter.toString();
  }

  private static void renderPhoto(OutputStreamWriter outputStreamWriter, Photo photo)
      throws IOException {
    outputStreamWriter.write("doSomething\n");
  }

  private static void listRecentPhotos(OutputStreamWriter outputStreamWriter, List<Photo> photos)
      throws IOException {
    for (Photo photo : photos) {
      // ì¡°ê±´ì‹
      outputStreamWriter.write("<div>\n");
      emmitPhotoData(outputStreamWriter, photo);
      outputStreamWriter.write("<p>ìœ„ì¹˜: " + photo.location() + "</p>\n"); // ì—¬ê¸°
      outputStreamWriter.write("</div>\n");
    }
  }

  private static void emmitPhotoData(OutputStreamWriter outputStreamWriter, Photo aPhoto)
      throws IOException {
    outputStreamWriter.write("<p>ì œëª©: " + aPhoto.title() + "</p>\n");
    outputStreamWriter.write("<p>ë‚ ì§œ: " + aPhoto.date().toString() + "</p>\n");
  }
}
```
- `emmitPhotoData(..)`ì—ì„œ ê³µí†µìœ¼ë¡œ ìœ„ì¹˜ ì •ë³´ë¥¼ ì¶œë ¥í•˜ë‹¤ê°€ ì»¤ìŠ¤í…€ ìœ„ì¹˜ ì •ë³´ê°€ í•„ìš”í•œ ìƒí™©
  - ê²½ìš°ì— ë”°ë¼ ìœ„ì¹˜ ì •ë³´ë¥¼ ì¶œë ¥í•˜ê³  ì‹¶ì§€ ì•ŠëŠ” ê²½ìš° `emmitPhotoData(..)` ìˆ˜ì •í•˜ë©´ ëª¨ë“  í˜¸ì¶œìê°€ ì˜í–¥ì„ ë°›ìŒ
  - ì´ëŠ” ê³§ ì¬ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§€ê²Œ ëœë‹¤
- ë¦¬íŒ©í„°ë§ í›„ ìœ„ì¹˜ ì •ë³´ ì¶œë ¥ ì—¬ë¶€ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì—ì„œ ê²°ì •í•˜ê²Œ ë¨
  - ìœ„ì¹˜ ì •ë³´ ì¶œë ¥ ì—¬ë¶€ë¥¼ í˜¸ì¶œìê°€ ì§ì ‘ ì œì–´ ê°€ëŠ¥
  - `emmitPhotoData(..)`ëŠ” ì´ì œ ì‚¬ì§„ì˜ ì œëª©ê³¼ ë‚ ì§œ ì¶œë ¥ì— ëŒ€í•œ ì±…ì„ë§Œ ê°€ì§
- ì¦‰, ì¶œë ¥ ë°©ì‹ì˜ ì»¤ìŠ¤í…€ í•„ìš”ì„±ì´ ìƒê¸¸ ë•Œ, í˜¸ì¶œí•˜ëŠ” ê³³ì—ì„œ ì§ì ‘ ì œì–´í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½í•œ ê²ƒ 
<br/>

### 8.5 ì¸ë¼ì¸ ì½”ë“œë¥¼ í•¨ìˆ˜ í˜¸ì¶œë¡œ ë°”ê¾¸ê¸°
- ì¹´íƒˆë¡œê·¸: [Replace Inline Code with Function Call](https://refactoring.com/catalog/replaceInlineCodeWithFunctionCall.html)
- ì˜ˆì‹œ ì½”ë“œ ì—†ìŒ ğŸ™…â€â™‚ï¸
<br/>

**ë°°ê²½**
- í•¨ìˆ˜ëŠ” ì—¬ëŸ¬ ë™ì‘ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ì¤€ë‹¤
- ê·¸ë¦¬ê³  í•¨ìˆ˜ì˜ ì´ë¦„ì´ ì½”ë“œì˜ ë™ì‘ ë°©ì‹ë³´ë‹¤ëŠ” `ëª©ì `ì„ ë§í•´ì£¼ê¸° ë–„ë¬¸ì— í•¨ìˆ˜ë¥¼ í™œìš©í•˜ë©´ ì½”ë“œë¥¼ ì´í•´í•˜ê¸°ê°€ ì‰¬ì›Œì§„ë‹¤
- í•¨ìˆ˜ëŠ” ì¤‘ë³µì„ ì—†ì• ëŠ” ë°ë„ íš¨ê³¼ì ì´ë‹¤

<br/>

**ì ˆì°¨**
- ì¸ë¼ì¸ ì½”ë“œë¥¼ í•¨ìˆ˜ í˜¸ì¶œë„ ëŒ€ì²´í•œë‹¤
- í…ŒìŠ¤íŠ¸í•œë‹¤

<br/>

**ğŸ’©before**
```java
boolean appliesToMass = false;
for(String s : states) {
    if(s.equals("MA")) appliesToMass = true;    
}
```
<br/>

**âœ¨after**
```java
boolean appliesToMass = states.contains("MA"); // List êµ¬í˜„ì²´
```
<br/>

> **NOTE** í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°(6.1)ì™€ ì´ë²ˆ ë¦¬íŒ©í„°ë§ì˜ ì°¨ì´ëŠ” ì¸ë¼ì¸ ì½”ë“œë¥¼ ëŒ€ì²´í•  í•¨ìˆ˜ê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠëƒ ì—¬ë¶€ë‹¤. 
> ì•„ì§ ì—†ì–´ì„œ ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´ í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°ë¥¼ ì ìš©í•˜ê³ , ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´ ì¸ë¼ì¸ ì½”ë“œë¥¼ í•¨ìˆ˜ í˜¸ì¶œë¡œ ë°”ê¾¸ê¸°ë¥¼ ì ìš©í•˜ë©´ ëœë‹¤.
> ì‚¬ìš© ì¤‘ì¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í”Œë«í¼ì´ ì œê³µí•˜ëŠ” APIë¥¼ ì˜ íŒŒì•…í•˜ê³  ìˆì„ìˆ˜ë¡ ì´ë²ˆ ë¦¬íŒ©í„°ë§ì˜ í™œìš© ë¹ˆë„ê°€ ë†’ì•„ì§ˆ ê²ƒì´ë‹¤.
> (..) ë¬¼ë¡  ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì§€ë‚˜ì¹˜ê²Œ ì˜ì¡´í•˜ë©´ ì„¤ê³„ ìœ ì—°ì„±ì´ ë–¨ì–´ì§€ë‹ˆ ì²˜í•œ ìƒí™©ì— ë§ê²Œ ì‹ ì¤‘íˆ íŒë‹¨í•´ì•¼ í•œë‹¤.

ì˜ˆì „ì— Apache Commonì—ì„œ ì œê³µí•˜ëŠ” StringUtilsë¥¼ ì‚¬ìš©í–ˆì—ˆëŠ”ë°, ì‹ ì…ì´ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹ˆë¼ê³  ì‚¬ìš©í•˜ë©´ ì•ˆë˜ëŠ”ê±° ì•„ë‹ˆëƒ ë¬¼ì—ˆì„ ë•Œ
ì œëŒ€ë¡œ ë‹µë³€í•˜ì§€ ëª»í–ˆì—ˆë˜ê²Œ ìƒê°ì´ ë‚œë‹¤. í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤ë©´ ìƒê´€ì—†ì§€ë§Œ, ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  í•„ìš”ê°€ ìˆê±°ë‚˜ WASë¥¼ íŠ¹ë³„íˆ ë³€ê²½í•  ì´ìœ ê°€ ì—†ë‹¤ë©´ í™œìš©í•´ë„ ê´œì°®ë‹¤ê³  ì„¤ëª…í–ˆìœ¼ë©´ ì–´ë• ì„ê¹Œì‹¶ë‹¤.
ì¦‰, í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¶©ë¶„í•˜ë©´ í™œìš©í•˜ë˜, ë¶€ì¡±í•œ ê²½ìš°ëŠ” ê²€ì¦ëœ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ê·¹ í™œìš©í•˜ëŠ” ê²ƒì´ ì‹¤ìš©ì ì¸ ì ‘ê·¼!

### 8.6 ë¬¸ì¥ ìŠ¬ë¼ì´ë“œí•˜ê¸°
- ì¹´íƒˆë¡œê·¸: [Slide Statements](https://refactoring.com/catalog/slideStatements.html)
- ë°”ë¡œê°€ê¸°
  - [ì˜ˆì‹œ](../src/main/java/com/example/refactoring2/ch08/ex6)
  - [í…ŒìŠ¤íŠ¸](../src/test/java/com/example/refactoring2/ch08/ex6)

<br/>

**ë°°ê²½**
- ê´€ë ¨ëœ ì½”ë“œë“¤ì´ ê°€ê¹Œì´ ëª¨ì—¬ ìˆë‹¤ë©´ ì´í•´í•˜ê¸°ê°€ ë” ì‰½ë‹¤ 
- ì €ìëŠ” ë³€ìˆ˜ë¥¼ ì²˜ìŒ ì‚¬ìš©í•  ë•Œ ì„ ì–¸í•˜ëŠ” ìŠ¤íƒ€ì¼ì€ ì„ í˜¸í•œë‹¤ê³  ë§í•œë‹¤
- ê´€ë ¤ ì½”ë“œë¼ë¦¬ ëª¨ìœ¼ëŠ” ì‘ì—…ì€ ë‹¤ë¥¸ ë¦¬íŒ©í„°ë§(ì£¼ë¡œ `í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°`)ì˜ ì¤€ë¹„ ë‹¨ê³„ë¡œ ìì£¼ í–‰í•´ì§„ë‹¤
- **ê´€ë ¨ ìˆëŠ” ì½”ë“œë“¤ì„ ëª…í™•íˆ êµ¬ë³¸ë˜ëŠ” í•¨ìˆ˜ë¡œ ì¶”ì¶œ**í•˜ëŠ” ê²Œ ê·¸ì € ë¬¸ì¥ë“¤ì„ í•œë°ë¡œ ëª¨ìœ¼ëŠ” ê²ƒë³´ë‹¤ ë‚˜ì€ ë¶„ë¦¬ë²•ì´ë‹¤

<br/>

**ì ˆì°¨**
- ì½”ë“œ ì¡°ê°(ë¬¸ì¥ë“¤)ì„ ì´ë™í•  ëª©í‘œ ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤
  - ì¡°ê°ì„ ëª¨ìœ¼ê³  ë‚˜ë©´ ë™ì‘ì´ ë‹¬ë¼ì§€ëŠ” ì½”ë“œê°€ ìˆëŠ”ì§€ ì‚´í•€ë‹¤
- ì½”ë“œ ì¡°ê°ì„ ì›ë˜ ìœ„ì¹˜ì—ì„œ ì˜ë¼ë‚´ì–´ ëª©í‘œ ìœ„ì¹˜ì— ë¶™ì—¬ ë„£ëŠ”ë‹¤ 
- í…ŒìŠ¤íŠ¸í•œë‹¤
<br/>

> ë¬´ì—‡ì„ ìŠ¬ë¼ì´ë“œí• ì§€ì™€ ìŠ¬ë¼ì´ë“œ í•  ìˆ˜ ìˆëŠ” ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤. 
> ì´ë•Œ ë¬´ì—‡ì„ ìŠ¬ë¼ì´ë“œ í• ì§€ëŠ” ë§¥ë½ê³¼ ê´€ë ¨ì´ ê¹Šë‹¤.

**ğŸ’©before**
```java
public class BillingService {  
  //..
  
  public double processOrder(Long orderId) {  
    PricingPlan pricingPlan = pricingPlanRepository.findPricingPlan();  
    Order order = orderRepository.findById(orderId);  
  
    double charge = 0.0;  
    int baseCharge = pricingPlan.getBase();  
    int chargePerUnit = pricingPlan.getUnitCharge();  
    int units = order.getUnits();  
    double discount = 0;  
    charge = baseCharge + units * chargePerUnit;  
    int discountableUnits = Math.max(units - pricingPlan.getDiscountThreshold(), 0);  
    discount = discountableUnits * pricingPlan.getDiscountFactor();  
    if (order.isRepeatOrder()) discount += 20;  
    charge = charge - discount;  
    return charge;  
  }  
}
```
<br/>

**âœ¨after**
```java
public class BillingService {
  //..
  
  public double processOrder(Long orderId) {
    // ê°€ê²© ì •ì±…ê³¼ ì£¼ë¬¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤  
    PricingPlan pricingPlan = pricingPlanRepository.findPricingPlan();
    Order order = orderRepository.findById(orderId);

    // ê¸°ë³¸ ì²­êµ¬ ê¸ˆì•¡ì„ ê³„ì‚°í•œë‹¤  
    int baseCharge = pricingPlan.getBase();
    int chargePerUnit = pricingPlan.getUnitCharge();
    int units = order.getUnits();
    double charge = baseCharge + units * chargePerUnit;

    // í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•œë‹¤  
    int discountableUnits = Math.max(units - pricingPlan.getDiscountThreshold(), 0);
    double discount = discountableUnits * pricingPlan.getDiscountFactor();
    if (order.isRepeatOrder()) {
      discount += 20;
    }

    return charge - discount;
  }
}
```
<br/>

**ğŸ“šì°¸ê³ **
- [ë¬¸ì¥ êµí™˜í•˜ê¸°(Swap Statement)](https://www.industriallogic.com/blog/swap-statement-refactoring/)ë¼ëŠ” ì´ë¦„ì´ ê±°ì˜ ë˜‘ê°™ì€ ë¦¬íŒ©í„°ë§ë„ ìˆë‹¤
- ì´ë™í•  ì¡°ê°ê³¼ ê±´ë„ˆë›¸ ì¡°ê° ëª¨ë‘ ë‹¨ì¼ ë¬¸ì¥ìœ¼ë¡œ êµ¬ì„±ëœ ë¬¸ì¥ ìŠ¬ë¼ì´ë“œë¡œ ìƒê°

<br/>

### 8.7 ë°˜ë³µë¬¸ ìª¼ê°œê¸°
- ì¹´íƒˆë¡œê·¸: [Split Loop](https://refactoring.com/catalog/splitLoop.html)
- ë°”ë¡œê°€ê¸°
  - [ì˜ˆì‹œ](../src/main/java/com/example/refactoring2/ch08/ex7)
  - [í…ŒìŠ¤íŠ¸](../src/test/java/com/example/refactoring2/ch08/ex7)

<br/>

> ë°˜ë³µë¬¸ ìª¼ê°œê¸°ì˜ ë¬˜ë¯¸ëŠ” ê·¸ ìì²´ê°€ ì•„ë‹Œ, ë‹¤ìŒ ë‹¨ê³„ë¡œ ê°€ëŠ” ë””ë”¤ëŒ ì—­í• ì— ìˆë‹¤

**ë°°ê²½**
- ê°ê°ì˜ ë°˜ë³µë¬¸ìœ¼ë¡œ ë¶„ë¦¬í•´ë‘ë©´ ìˆ˜ì •í•  ë™ì‘ í•˜ë‚˜ë§Œ ì´í•´í•˜ë©´ ëœë‹¤
- ë°˜ë³µë¬¸ì„ ë¶„ë¦¬í•˜ë©´ ì‚¬ìš©í•˜ê¸°ë„ ì‰¬ì›Œì§„ë‹¤
- <u>ë¦¬íŒ©í„°ë§í™” ìµœì í™”ë¥¼ êµ¬ë¶„í•˜ì</u>
  - ìµœì í™”ëŠ” ì½”ë“œë¥¼ ê¹”ë”íˆ ì •ë¦¬í•œ ì´í›„ì— ìˆ˜í–‰í•˜ì
  - ë°˜ë³µë¬¸ ë‘ ë²ˆ ì‹¤í–‰í•˜ëŠ”ê²Œ ë³‘ëª©ì´ë¼ ë°í˜€ì§€ë©´ ê·¸ë•Œ ë‹¤ì‹œ í•˜ë‚˜ë¡œ í•©ì¹˜ëŠ” ê²ƒì€ ì‰½ë‹¤
- ë°˜ë³µë¬¸ ìª¼ê°œê¸°ê°€ ë‹¤ë¥¸ ë” ê°•ë ¥í•œ ìµœì í™”ë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ê¸¸ì„ ì—´ì–´ì£¼ê¸°ë„ í•œë‹¤

**ì ˆì°¨**
- ë°˜ë³µë¬¸ì„ ë³µì œí•´ ë‘ ê°œë¡œ ë§Œë“ ë‹¤
- ë°˜ë³µë¬¸ì´ ì¤‘ë³µë˜ì–´ ìƒê¸°ëŠ” ë¶€ìˆ˜íš¨ê³¼ë¥¼ íŒŒì•…í•´ì„œ ì œê±°í•œë‹¤ 
- í…ŒìŠ¤íŠ¸í•œë‹¤ 
- ì™„ë£Œëìœ¼ë©´, ê° ë°˜ë³µë¬¸ì„ í•¨ìˆ˜ë¡œ ì¶”ì¶œí• ì§€ ê³ ë¯¼í•´ë³¸ë‹¤
<br/>

**ğŸ’©before**
```java
public class YoungestTotalSalary {  
  private final List<Person> peoples;  
  
  public YoungestTotalSalary(List<Person> peoples) {  
    this.peoples = new ArrayList<>(peoples);  
  }  
  
  public String getYoungestTotalSalary() {  
    int youngest = peoples.isEmpty() ? Integer.MAX_VALUE : peoples.get(0).getAge();  
    long totalSalary = 0;  
    for (Person person : peoples) {  
      if (person.getAge() < youngest) youngest = person.getAge();  
      totalSalary += person.getSalary();  
    }  
  
    return String.format("ìµœì—°ì†Œ: %s, ì´ ê¸‰ì—¬: %s", youngest, totalSalary);  
  }  
}
```
<br/>

**âœ¨after**
```java
public class YoungestTotalSalary {  
  private final List<Person> peoples;  
  
  public YoungestTotalSalary(List<Person> peoples) {  
    this.peoples = new ArrayList<>(peoples);  
  }  
  
  public String getYoungestTotalSalary() {  
    long totalSalary = 0;  
    for (Person person : peoples) {  
      totalSalary += person.getSalary();  
    }  
  
    int youngest = peoples.isEmpty() ? Integer.MAX_VALUE : peoples.get(0).getAge();  
    for (Person person : peoples) {  
      if (person.getAge() < youngest) youngest = person.getAge();  
    }  
  
    return String.format("ìµœì—°ì†Œ: %s, ì´ ê¸‰ì—¬: %s", youngest, totalSalary);  
  }  
}
```
- â‘  ë°˜ë³µë¬¸ì„ ë³µì‚¬í•˜ê³ , â‘¡ë°˜ë³µë¬¸ ë³µì œë¡œ ì¸í•´ ì˜ëª»ëœ ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆëŠ” ì¤‘ë³µ ì œê±° ë° ë¬¸ì¥ ìŠ¬ë¼ì´ë“œ
- ì¶”ê°€ë¡œ í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°ì™€ ì•Œê³ ë¦¬ì¦˜ êµì²´í•˜ê¸° ì ìš©í•´ë³¸ë‹¤ (ì•„ë˜ ì°¸ê³ )

```java
public class YoungestTotalSalary {  
  private final List<Person> peoples;  
  
  public YoungestTotalSalary(List<Person> peoples) {  
    this.peoples = new ArrayList<>(peoples);  
  }  
  
  public String getYoungestTotalSalary() {  
    return String.format("ìµœì—°ì†Œ: %s, ì´ ê¸‰ì—¬: %s", youngest(), totalSalary());  
  }  
  
  private int youngest() {  
    return peoples.stream()  
        .mapToInt(Person::getAge)  
        .min()  
        .orElseThrow(() -> new IllegalArgumentException("No people available"));  
  }  
  
  private long totalSalary() {  
    return peoples.stream().mapToInt(Person::getSalary).sum();  
  }  
}
```


<br/>

### 8.8 ë°˜ë³µë¬¸ì„ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ë°”ê¾¸ê¸°
- ì¹´íƒˆë¡œê·¸: [Replace Loop with Pipeline](https://refactoring.com/catalog/replaceLoopWithPipeline.html)
- ë°”ë¡œê°€ê¸°
    - [ì˜ˆì‹œ](../src/main/java/com/example/refactoring2/ch08/ex8) 
    - [í…ŒìŠ¤íŠ¸](../src/test/java/com/example/refactoring2/ch08/ex8)

<br/>

**ë°°ê²½**
- íŒŒì´í”„ë¼ì¸(Collection Pipeline)ì„ ì´ìš©í•˜ë©´ ì²˜ë¦¬ ê³¼ì •ì„ ì¼ë ¨ì˜ ì—°ì‚°ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤
- ë…¼ë¦¬ë¥¼ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì´í•´í•˜ê¸° í›¨ì”¬ ì‰¬ì›Œì§„ë‹¤ 
  - ê°ì²´ê°€ íŒŒì´í”„ë¼ì¸ì„ ë”°ë¼ íë¥´ë©° ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€ ì½ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤ 
- ë°˜ë³µë¬¸ì„ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ëŒ€ì²´í•˜ëŠ” ì˜ˆë¥¼ ë” ë³´ê³  ì‹¶ì€ ê²½ìš° ì•„ë˜ ì €ìì˜ ë¸”ë¡œê·¸ ë§í¬ ì°¸ê³  
  - [Refactoring with Loops and Collection Pipelines](https://martinfowler.com/articles/refactoring-pipelines.html)

<br/>

**ì ˆì°¨**
- ë°˜ë³µë¬¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì»¬ë ‰ì…˜ì„ ê°€ë¥´í‚¤ëŠ” ë³€ìˆ˜ë¥¼ í•˜ë‚˜ ë§Œë“ ë‹¤
- ë°˜ë³µë¬¸ì˜ ì²« ì¤„ë¶€í„° ì‹œì‘í•´ì„œ, ê°ê°ì˜ ë‹¨ìœ„ í–‰ìœ„ë¥¼ ì ì ˆí•œ ì»¬ë ‰ì…˜ íŒŒì´í”„ë¼ì¸ ì—°ì‚°ìœ¼ë¡œ ëŒ€ì²´í•œë‹¤
  - ì´ë•Œ ì»¬ë ‰ì…˜ íŒŒì´í”„ë¼ì¸ ì—°ì‚°ì€ `ë°˜ë³µë¬¸ ì»¬ë ‰ì…˜ ë³€ìˆ˜ì—ì„œ ì‹œì‘`í•˜ì—¬, ì´ì „ ì—°ì‚°ì˜ ê²°ê³¼ë¥¼ ê¸°ì´ˆë¡œ ì—°ì‡„ì ìœ¼ë¡œ ìˆ˜í–‰ëœë‹¤
  - í•˜ë‚˜ë¥¼ ëŒ€ì²´í•  ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸í•œë‹¤
- ë°˜ë³µë¬¸ì˜ ëª¨ë“  ë™ì‘ì„ ëŒ€ì²´í–ˆë‹¤ë©´ ë°˜ë³µë¬¸ ìì²´ë¥¼ ì§€ìš´ë‹¤
<br/>

**ğŸ’©before**
```java
public class IndiaSearch {  
  private IndiaSearch() {}  
  
  public static List<SearchResult> acquireData(String input) {  
    String[] lines = input.split("\n");  
    boolean firstLine = true;  
    List<SearchResult> result = new ArrayList<>();  
    for (String line : lines) {  
      if (firstLine) {  
        firstLine = false;  
        continue;  
      }  
  
      if (line.trim().equals("")) continue;  
  
      String[] record = line.split(",");  
      if (record[1].trim().equals("India")) {  
        result.add(new SearchResult(record[0].trim(), record[2].trim()));  
      }  
    }  
  
    return result;  
  }  
}
```
<br/>

```java
class IndiaSearchTest {

  @Test
  void acquireDataTest() {
    String input = """  
                    office, country, telephone  
                    Chicago, USA, +1 312 373 1000  
                    Beijing, China, +86 4008 900 505  
                    Bangalore, India, +91 80 4064 9570  
                    Porto Alegre, Brazil, +55 31 3079 3550  
                    Chennai, India, +91 44 660 44766  
                    """;

    List<SearchResult> actual = IndiaSearch.acquireData(input);

    assertThat(actual)
            .hasSize(2)
            .containsExactly(
                    new SearchResult("Bangalore", "+91 80 4064 9570"),
                    new SearchResult("Chennai", "+91 44 660 44766"));
  }
}
```
<br/>

**âœ¨after**
```java
public class IndiaSearch {  
  private IndiaSearch() {}  
  
  public static List<SearchResult> acquireData(String input) {  
    return Arrays.stream(input.split("\n"))  
        .skip(1)  
        .filter(line -> !line.trim().isEmpty())  
        .map(line -> line.split(","))  
        .filter(record -> record[1].trim().equals("India"))  
        .map(record -> new SearchResult(record[0].trim(), record[2].trim()))  
        .toList();  
  }  
}
```
- ì²˜ìŒ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ `slice()`ê°€ ì—†ì–´ì„œ ìë°”ì—ì„œëŠ” `Arrays.copyOfRange(..)`ë¥¼ ì‚¬ìš©
- ì´í›„ Stream API ì‚¬ìš©í•˜ë©´ì„œ `skip(1)` í†µí•´ ì²« ì¤„ ë„˜ê¹€ í•´ê²°
<br/>

### 8.9 ì£½ì€ ì½”ë“œ ì œê±°í•˜ê¸°
- ì¹´íƒˆë¡œê·¸: [Remove Dead Code](https://refactoring.com/catalog/removeDeadCode.html)
- ì˜ˆì‹œ ì½”ë“œ ì—†ìŒ ğŸ™…â€â™‚ï¸
<br/>

**ë°°ê²½**
- ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œê°€ ìˆë‹¤ë©´ ê·¸ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ë™ì‘ì„ ì´í•´í•˜ëŠ” ë°ëŠ” ì»¤ë‹¤ë€ ê±¸ë¦¼ëŒì´ ë  ìˆ˜ ìˆë‹¤
- ì½”ë“œê°€ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šê²Œ ëë‹¤ë©´ ì§€ì›Œì•¼ í•œë‹¤ 
  - ì§€ìš°ë”ë¼ë„ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ(ex. `git, svn`)ìœ¼ë¡œ ì´ë ¥ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤

<br/>

**ì ˆì°¨**
- ì£½ì€ ì½”ë“œë¥¼ ì™¸ë¶€ì—ì„œ ì°¸ì¡°í•  ìˆ˜ ì‡ëŠ” ê²½ìš°ë¼ë©´ í˜¹ì‹œë¼ë„ í˜¸ì¶œí•˜ëŠ” ê³³ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤
  - Intellij ì‚¬ìš©í•  ê²½ìš° í•¨ìˆ˜ ì„ íƒ í›„ `Alt + f7`ì„ ëˆ„ë¥´ë©´ ì‚¬ìš©ëœ ìœ„ì¹˜ë¥¼ ê²€ìƒ‰ í‘œì‹œí•´ì¤€ë‹¤âœ¨ 
- ì—†ë‹¤ë©´ ì£½ì€ ì½”ë“œë¥¼ ì œê±°í•œë‹¤ 
- í…ŒìŠ¤íŠ¸í•œë‹¤

<br/>

---
### Reference
- [ëª…ë ¹ ì§ˆì˜ ë¶„ë¦¬(Command-Query Separation) ì›ì¹™](https://martinfowler.com/bliki/CommandQuerySeparation.html)
- [Refactoring with Loops and Collection Pipelines](https://martinfowler.com/articles/refactoring-pipelines.html)
- [Collection Pipeline](https://martinfowler.com/articles/collection-pipeline/)
